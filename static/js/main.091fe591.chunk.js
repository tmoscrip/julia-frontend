(this["webpackJsonpjulia-frontend"]=this["webpackJsonpjulia-frontend"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),c=n.n(o),l=(n(10),n(11),r.a.createContext()),i=l.Provider,u=(l.Consumer,function(e){return Array.isArray(e)&&2===e.length&&function(e){return"function"===typeof e[1]&&e[1].name.startsWith("bound ")}(e)});function s(e){var t={};for(var n in e)u(e[n])?t[n]=e[n][0]:t[n]=s(e[n]);return t}function m(e,t){for(var n in e){if(u(t[n]))(0,t[n][1])(e[n]);else m(e[n],t[n])}}var f=function(e){var t=e.children,n={canvasRef:Object(a.useState)(null),gl:Object(a.useState)(null),julia:{c:{x:Object(a.useState)("-0.8"),y:Object(a.useState)("sin(u_time)")},coefficients:Object(a.useState)("1, 0, 1"),escapeRadius:Object(a.useState)("20"),maxIterations:Object(a.useState)("50"),useSmoothing:Object(a.useState)(!0)},viewport:{width:Object(a.useState)("5"),height:Object(a.useState)("5"),translate:{x:Object(a.useState)("0"),y:Object(a.useState)("0")},lockAspectRatio:Object(a.useState)(!0)},color:{colorPoints:Object(a.useState)([{hex:"#FFFFFF",position:0},{hex:"#000000",position:1}]),textureData:Object(a.useState)("")},time:{startedAt:Object(a.useState)(Date.now()),paused:Object(a.useState)(!1),lastPausedAt:Object(a.useState)(0),pauseDuration:Object(a.useState)(0),timeScale:Object(a.useState)("0.5")}};return r.a.createElement(i,{value:n},t)},p=n(1),v="\n".concat("\n#define PI 3.14159265359\n#define TAU 6.28318530718\n","\n").concat("\nvec2 complexConjug(in vec2 c) { \n  return vec2(c.x, -c.y); \n}\n","\n").concat("\nvec2 complexMult(in vec2 a, in vec2 b) {\n  return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n}\n","\n").concat("\nvec2 complexDiv(in vec2 a, in vec2 b) {\n  return complexMult(a, complexConjug(b));\n}\n","\n").concat("\nfloat complexMag(in vec2 c) { \n  return sqrt(c.x * c.x + c.y * c.y); \n}\n","\n").concat("\nvec2 complexPower(vec2 z1, vec2 z2) {\n  float a2b2 = z1.x * z1.x + z1.y * z1.y;\n  float t1 = pow(a2b2, z2.x / 2.) * exp(-z2.y * atan(z1.y, z1.x));\n  float t2 = z2.x * atan(z1.y, z1.x) + .5 * z2.y * log(a2b2);\n  return vec2(t1 * cos(t2), t1 * sin(t2));\n}\n","\n").concat("\nvec2 complexAdd(vec2 z1, vec2 z2) { \n  return vec2(z1.x + z2.x, z1.y + z2.y); \n}\n","\n");var h="\n".concat("\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1., 2. / 3., 1. / 3., 3.);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6. - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0., 1.), c.y);\n}\n","\n").concat("\nfloat huefn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .1 + .3*(iterations / max_iter);\n}\n","\n").concat("\nfloat satfn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .5 + .5*(iterations / max_iter);\n}\n","\n").concat("\nfloat valfn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .5 + 2.*(iterations / max_iter);\n}\n","\n");function E(e){for(var t,n=e,a=new RegExp(/\d+[.]\d+|(\d+[.])+|(\d+)/g),r=[];null!==(t=a.exec(e));)r.push(t);r=r.filter((function(e){return!e[0].includes(".")}));var o=0;for(var c in r){var l=r[c],i=l.index+l[0].length+o;n=n.slice(0,i)+"."+n.slice(i,n.length),o+=1}return n}var g=function(e){return"\nvec4 julia(vec2 z, vec2 c) {\n  float result;\n  int iters = 0;\n  vec2 zPrev = z;\n  z = vec2(0.);\n\n  for (int i = 0; i <= maxIterations; i++) {\n    ".concat(function(e){for(var t=function(e,t){return 0!==parseFloat(t)?0===e?"z = complexAdd(z, ".concat(t,"*c);"):1===e?"z = complexAdd(z, ".concat(t,"*zPrev);"):"z = complexAdd(z, complexPower(".concat(t,"*zPrev, vec2(").concat(e,", 0.)));"):""},n=e.replace(/\s/g,"").split(","),a="",r=0;r<n.length;r++){var o=t(n.length-(r+1),n[r]);""!==o&&(a=a.concat(o,"\n"))}return a}(E(e.julia.coefficients)),"\n    iters = i;\n    zPrev = z;\n    if (complexMag(z) > u_escapeRadius) break;\n  }\n\n  if (iters == maxIterations) {\n    return vec4(0,0,0,1);\n  } else {\n    ").concat(e.julia.useSmoothing?"result = smoothIterations(z, iters);":"result = float(iters);","\n  }\n\n  float percent = result/float(maxIterations);\n\n  return texture2D(u_colormap, vec2(percent));\n\n  // float hue = huefn(result);\n  // float sat = satfn(result);\n  // float val = valfn(result);\n\n  // return hsv2rgb(vec3(hue, sat, val, 1.0));\n}\n")},b=function(e){return"\nvoid main(void) {\n  ".concat(function(e){var t=e.width,n=e.height,a=e.translate;return"\n  float XSIZE = ".concat(E(t),";\n  float YSIZE = ").concat(E(n),";\n  float XT = ").concat(E(a.x),";\n  float YT = ").concat(E(a.y),";\n  ")}(e.viewport),"\n\n  ").concat(function(e){var t=e.x,n=e.y;return"vec2 c = vec2(".concat(E(t),", ").concat(E(n),");")}(e.julia.c),"\n\n  // Normalized pixel coordinates (from 0 to 1)\n  vec2 uv = gl_FragCoord.xy / u_resolution.xy;\n\n  vec2 z;\n  z.x = (XSIZE * (uv.x - .5)) + XT;\n  z.y = (YSIZE * (uv.y - .5)) + YT;\n\n  vec4 col = julia(z, c);\n  gl_FragColor = col;\n}\n")},d=function(e){return"\n".concat("\nprecision highp float;\n","\n").concat((t=e.julia.maxIterations,"#define maxIterations ".concat(t)),"\n").concat("\nuniform float u_escapeRadius;\n\nuniform vec2 u_resolution;\nuniform float u_time;\nuniform float u_width;\nuniform float u_height;\nuniform float u_translatex;\nuniform float u_translatey;\n\nuniform sampler2D u_colormap;\n","\n").concat(v,"\n").concat(h,"\n").concat("\nfloat smoothIterations(vec2 z, int iterations) {\n  // sqrt of inner term removed using log simplification rules.\n  // sqrt is equivilent to raising to power 0.5 therefore dividing\n  // by 2 or multiplying by 0.5 avoids an inefficient sqrt calculation\n  float log_zn = log(z.x * z.x + z.y * z.y) / 2.;\n  float nu = log(log_zn / log(2.)) / log(2.);\n  // Rearranging the potential function.\n  // Dividing log_zn by log(2) instead of log(N = 1<<8)\n  // because we want the entire palette to range from the\n  // center to radius 2, NOT our bailout radius.\n  return float(iterations) + 1. - nu;\n}\n","\n").concat(g(e),"\n").concat(b(e),"\n");var t},x="\nattribute vec3 coordinates;\n\nvoid main(void) {\n  gl_Position = vec4(coordinates, 1.0);\n}\n";function j(e,t){for(var n=function e(t,n){for(var a in t){var r=t[a];null!=r&&Array.isArray(r)?t[a]=e(t[a],n):t[a]=n(t[a])}return t}(function(e,t,n){for(var a=function(e,t,n){return e*n+t*(1-n)},r=[],o=0;o<n;o++){for(var c=[],l=0;l<e.length;l++)c[l]=a(e[l],t[l],o/n);r[o]=c}return r}([0,255,0,255],[0,0,0,255],e),(function(e){return Math.round(e)})),a=e*t,r=new Uint8Array(a),o=0;o<a;o++){var c=Math.floor(o/t),l=o%t;r[o]=n[c][l]}return r}var O=[-1,1,0,-1,-1,0,1,-1,0,1,1,0],w=[3,2,1,3,1,0];function y(e,t){var n=t.canvasRef,a=t.gl,r=t.julia,o=t.time,c=t.viewport,l=r.escapeRadius,i=r.maxIterations,u=a.getUniformLocation(e,"u_escapeRadius");a.uniform1f(u,l);var s=a.getUniformLocation(e,"u_maxIterations");a.uniform1i(s,i);var m=a.getUniformLocation(e,"u_resolution");a.uniform2fv(m,[n.width,n.height]);var f,p,v=a.getUniformLocation(e,"u_time"),h=(f=o.startedAt,p=o.pauseDuration,(Date.now()-f-p)/1e3*o.timeScale);a.uniform1f(v,h);var E=a.getUniformLocation(e,"u_width");a.uniform1f(E,c.width);var g=a.getUniformLocation(e,"u_height");a.uniform1f(g,c.height);var b=a.getUniformLocation(e,"u_translatex");a.uniform1f(b,c.translate.x);var d=a.getUniformLocation(e,"u_translatey");a.uniform1f(d,c.translate.y);var x=a.getUniformLocation(e,"u_colormap"),O=j(1024,4),w=a.createTexture();a.bindTexture(a.TEXTURE_2D,w),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1024,1,0,a.RGBA,a.UNSIGNED_BYTE,O),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.uniform1i(x,w)}function C(e){var t=e.canvasRef,n=e.gl;if(null!==n){var a=d(e),r=function(e){var t=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(O),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),t}(n),o=function(e){var t=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(w),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),t}(n),c=function(e,t){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,x),e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,t),e.compileShader(a);var r=e.createProgram();if(e.attachShader(r,n),e.attachShader(r,a),e.linkProgram(r),e.useProgram(r),!e.getShaderParameter(a,e.COMPILE_STATUS)){for(var o=e.getShaderInfoLog(a),c=[],l=0;l<o.length;l++)":"===o[l]&&c.push(l);var i=o.substring(c[1]+1,c[2]);console.log(t.split("\n")[i-1])}return e.getShaderParameter(n,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(n)),r}(n,a);y(c,e),n.bindBuffer(n.ARRAY_BUFFER,r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o);var l=n.getAttribLocation(c,"coordinates");n.vertexAttribPointer(l,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l),n.clearColor(0,0,0,1),n.enable(n.DEPTH_TEST),n.clear(n.COLOR_BUFFER_BIT),n.viewport(0,0,t.width,t.height),n.drawElements(n.TRIANGLES,w.length,n.UNSIGNED_SHORT,0)}else alert("Unable to initialize WebGL. Your browser or machine may not support it.")}function T(e){var t=e.frameCount,n=e.frameTime;return r.a.createElement("div",{className:"frametime"},r.a.createElement("p",null,"Frames: ",t),r.a.createElement("p",null,"Frametime: ",n,"ms"))}function _(e){var t=e.hoverText;return r.a.createElement("div",{className:"tooltip"},r.a.createElement("span",{className:"tooltip-text"},t))}function S(e){var t=e.label,n=e.helpText,a=e.inputValue,o=e.setInputValue;return r.a.createElement("div",{className:"field-container"},r.a.createElement("span",{className:"panel-label"},t),n?r.a.createElement(_,{hoverText:n}):null,r.a.createElement("input",{className:"panel-input",type:"checkbox",name:t,checked:a,onChange:function(){o(!1===a)}}))}function R(e){var t=e.label,n=e.helpText,a=e.inputValue,o=e.setInputValue;return r.a.createElement("div",{className:"field-container"},r.a.createElement("span",{className:"panel-label"},t),n?r.a.createElement(_,{hoverText:n}):null,r.a.createElement("input",{className:"panel-input",name:t,value:a,onChange:function(e){o(e.target.value),a=e.target.value}}))}function A(e){var t=e.onClick,n=e.className;return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",onClick:t,className:n},r.a.createElement("g",null,r.a.createElement("rect",{fill:"none",height:"24",width:"24"})),r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("polygon",{points:"15.5,5 11,5 16,12 11,19 15.5,19 20.5,12"}),r.a.createElement("polygon",{points:"8.5,5 4,5 9,12 4,19 8.5,19 13.5,12"}))))}function z(e){var t=e.open,n=e.setOpen;return r.a.createElement(A,{onClick:function(){!0===t?n(!1):!1===t&&n(!0)},facing:t?"up":"down",className:"group-button"})}function N(e){var t=e.title,n=e.children,o=Object(a.useState)(!0),c=Object(p.a)(o,2),l=c[0],i=c[1],u="group-content ".concat(l?"open":""),s="group-container ".concat(l?"open":"");return r.a.createElement("div",{className:s},r.a.createElement("div",{className:"group-heading"},r.a.createElement("span",{className:"group-title"},t),r.a.createElement(z,{open:l,setOpen:i})),r.a.createElement("div",{className:u}," ",n))}function I(){var e=Object(a.useContext)(l),t=Object(p.a)(e.viewport.width,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"Viewport Width",helpText:"Viewport width",inputValue:n,setInputValue:o})}function F(){var e=Object(a.useContext)(l),t=Object(p.a)(e.viewport.height,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"Viewport Height",helpText:"Viewport height",inputValue:n,setInputValue:o})}function P(){var e=Object(a.useContext)(l),t=Object(p.a)(e.viewport.translate.x,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"Translate X",helpText:"Translate x",inputValue:n,setInputValue:o})}function V(){var e=Object(a.useContext)(l),t=Object(p.a)(e.viewport.translate.y,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"Translate Y",helpText:"Translate y",inputValue:n,setInputValue:o})}function U(){var e=Object(a.useContext)(l),t=Object(p.a)(e.viewport.lockAspectRatio,2),n=t[0],o=t[1];return r.a.createElement(S,{label:"Lock aspect ratio",helpText:"Toggle viewport aspect ratio locking",inputValue:n,setInputValue:o})}function D(){return r.a.createElement(N,{title:"Viewport"},r.a.createElement(I,null),r.a.createElement(F,null),r.a.createElement(P,null),r.a.createElement(V,null),r.a.createElement(U,null))}function B(e){var t=e.open,n=e.setOpen;return r.a.createElement("button",{onClick:function(e){!0===t?n(!1):!1===t&&n(!0)},className:"panel-toggle"},t?"<<<":">>>")}function L(e){var t=e.children,n=e.styleClass,o=Object(a.useState)(!0),c=Object(p.a)(o,2),l=c[0],i=c[1];return r.a.createElement("div",{className:"".concat(n," panel ").concat(l?"panel-open":"panel-closed")},r.a.createElement(B,{open:l,setOpen:i}),t)}function k(){var e=Object(a.useContext)(l),t=Object(p.a)(e.time.paused,2),n=t[0],o=t[1],c=Object(p.a)(e.time.lastPausedAt,2),i=c[0],u=c[1],s=Object(p.a)(e.time.pauseDuration,2)[1];return r.a.createElement("button",{onClick:function(){!0===n?(o(!1),s((function(e){return e+(Date.now()-i)}))):!1===n&&(o(!0),u(Date.now()))},className:"pause-button"},n?"Resume":"Pause")}function M(){var e=localStorage.getItem("presets");return e?JSON.parse(e):[]}function Y(){var e=Object(a.useContext)(l),t=Object(a.useState)(""),n=Object(p.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(""),u=Object(p.a)(i,2),f=u[0],v=u[1],h=Object(a.useState)([]),E=Object(p.a)(h,2),g=E[0],b=E[1],d=function(){var e=M();b(e)};return Object(a.useEffect)((function(){d()}),[]),r.a.createElement(N,{title:"Presets"},r.a.createElement(R,{label:"Preset name",inputValue:f,setInputValue:v}),r.a.createElement("select",{value:o,onChange:function(e){c(e.target.value)},className:"panel-input preset-selector"},0===g.length?r.a.createElement("option",null,"No presets saved"):null,g.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}))),r.a.createElement("button",{className:"panel-input",onClick:function(){var t=function(e,t){return{name:e,julia:s(t.julia),viewport:s(t.viewport)}}(f,e);!function(e){var t=M();for(var n in t)if(n.name===e)return!0}(t),function(e){var t=M();t.push(e),localStorage.setItem("presets",JSON.stringify(t))}(t),d()}},"Save"),r.a.createElement("button",{className:"panel-input",onClick:function(){var t=M();for(var n in t){var a=t[n];a.name===o&&(m(a.julia,e.julia),m(a.viewport,e.viewport))}}},"Load"))}function X(){var e=Object(a.useContext)(l),t=Object(p.a)(e.julia.c.x,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"C Y",helpText:"C value x",inputValue:n,setInputValue:o})}function W(){var e=Object(a.useContext)(l),t=Object(p.a)(e.julia.c.y,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"C X",helpText:"C value y",inputValue:n,setInputValue:o})}function H(){var e=Object(a.useContext)(l),t=Object(p.a)(e.julia.coefficients,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"Coefficients",helpText:"Comma-seperated values for the coefficients of each polynomial term. N values applied in the order Z^^n-1 ... Z^^1, C",inputValue:n,setInputValue:o})}function G(){var e=Object(a.useContext)(l),t=function(e){for(var t=e.replace(/\s/g,"").split(","),n=[],a=0;a<t.length;a++){var r=t.length-(a+1),o=parseFloat(t[a]);n.push({exp:r,coeff:o})}return n}(Object(p.a)(e.julia.coefficients,1)[0]);function n(e){var t=e.term,n=e.isFirst,a=t.exp,o=t.coeff;if(0===o)return null;var c=function(e,t){return e<0?"\u2212":t?null:"+"},l=function(e){var t=Math.abs(e);return 1!==t?"".concat(e<0?t:e,"\xb7"):null};switch(a){case 0:return r.a.createElement("span",{className:"poly-term"},c(o,n),l(o),"C");case 1:return r.a.createElement("span",{className:"poly-term"},c(o,n),l(o),"Z");default:return r.a.createElement("span",{className:"poly-term"},c(o,n),l(o),"Z",r.a.createElement("sup",null,a))}}return r.a.createElement("span",{className:"poly-container"},t.map((function(e,t){return r.a.createElement(n,{key:t,term:e,isFirst:0===t})})))}function Z(){var e=Object(a.useContext)(l),t=Object(p.a)(e.julia.maxIterations,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"Max Iterations",helpText:"Max iterations",inputValue:n,setInputValue:o})}function q(){var e=Object(a.useContext)(l),t=Object(p.a)(e.julia.escapeRadius,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"Escape radius",helpText:"Escape radius",inputValue:n,setInputValue:o})}function J(){var e=Object(a.useContext)(l),t=Object(p.a)(e.julia.useSmoothing,2),n=t[0],o=t[1];return r.a.createElement(S,{label:"Julia smoothing",helpText:"Toggle Julia iteration smoothing",inputValue:n,setInputValue:o})}function K(){var e=Object(a.useContext)(l),t=Object(p.a)(e.time.timeScale,2),n=t[0],o=t[1];return r.a.createElement(R,{label:"Time scale",helpText:"Time scale",inputValue:n,setInputValue:o})}function $(){return r.a.createElement(N,{title:"Julia Variables"},r.a.createElement(X,null),r.a.createElement(W,null),r.a.createElement(H,null),r.a.createElement(G,null),r.a.createElement(Z,null),r.a.createElement(q,null),r.a.createElement(J,null),r.a.createElement(K,null))}var Q=n(2);function ee(e){var t=e.value,n=e.onChange;return r.a.createElement("div",{className:"field-container"},r.a.createElement("span",{className:"panel-label"},"Color"),r.a.createElement("input",{className:"panel-input",name:"Color",value:t,onChange:n}))}function te(e){var t=e.value,n=e.onChange;return r.a.createElement("div",{className:"field-container"},r.a.createElement("span",{className:"panel-label"},"Position"),r.a.createElement("input",{className:"panel-input",name:"Position",value:t,onChange:n}))}function ne(e){var t=e.combinedColorObj,n=e.idx,a=e.handleFieldChange,o=t.hex,c=t.position;function l(e){a(e,n)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{value:o,onChange:l}),r.a.createElement(te,{value:c,onChange:l}))}function ae(e){var t=e.addPoint,n=e.removePoint;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"point-control-btn",onClick:t},"+"),r.a.createElement("button",{className:"point-control-btn",onClick:n},"-"))}function re(){var e=Object(a.useContext)(l),t=Object(p.a)(e.color.colorPoints,2),n=t[0],o=t[1],c=2;function i(e,t){var a=e.target.value,r=n[t],c=function(){switch(e.target.name.toLowerCase()){case"color":return Object(Q.a)({},r,{hex:a});case"position":return Object(Q.a)({},r,{position:a});default:return r}}.call();n[t]=c,o(n)}return r.a.createElement(N,{title:"Color mapping"},r.a.createElement(ae,{addPoint:function(){n.push({hex:"",position:""}),o(n)},removePoint:function(){n.length<=c||(n.pop(),o(n))}}),n.map((function(e,t){return r.a.createElement(ne,{key:t,combinedColorObj:e,handleFieldChange:i,idx:t})})))}var oe=function(e){var t=e.children;function n(e){var t=e.size;return r.a.createElement("div",{style:{marginBottom:t}})}return r.a.createElement(L,{styleClass:"control-panel"},r.a.createElement(k,null),r.a.createElement(n,{size:"3em"}),r.a.createElement("p",{className:"field-container"},"Drag a box on the canvas to zoom to that area"),r.a.createElement(n,{size:"3em"}),r.a.createElement($,null),r.a.createElement(n,{size:"3em"}),r.a.createElement(D,null),r.a.createElement(n,{size:"3em"}),r.a.createElement(re,null),r.a.createElement(n,{size:"3em"}),r.a.createElement(Y,null),r.a.createElement(n,{size:"3em"}),t)};function ce(e){var t=e.width,n=e.height;var a=function(){var e=document.getElementsByClassName("glcanvas")[0],t=[e.offsetWidth,e.offsetHeight];return t[0]>t[1]?"landscape":"portrait"}(),r=function(e){var t=document.getElementsByClassName("glcanvas")[0],n=[t.offsetWidth,t.offsetHeight],a=n[0],r=n[1];return 0===r||0===a?1:"landscape"===e?a/r:"portrait"===e?r/a:1}(a);return"landscape"===a?n*=1/r:"portrait"===a&&(t*=1/r),{width:t,height:n}}function le(){var e=Object(a.useContext)(l),t=Object(p.a)(e.viewport.lockAspectRatio,1)[0],n=Object(a.useState)(),o=Object(p.a)(n,2),c=o[0],i=o[1],u=function(){var e=Object(a.useContext)(l),t=Object(a.useRef)(),n=e.canvasRef[1],r=e.gl[1];return Object(a.useEffect)((function(){n(t.current),r(t.current.getContext("webgl"))}),[n,r,t]),t}(),m=function(){var e=Object(a.useContext)(l),t=Object(a.useRef)(),n=Object(a.useState)(0),r=Object(p.a)(n,2),o=r[0],c=r[1],i=Object(a.useState)(0),u=Object(p.a)(i,2),m=u[0],f=u[1],v=e.time.paused[0],h=e.gl[0];return Object(a.useEffect)((function(){return t.current=requestAnimationFrame((function n(){!1===v&&null!==h&&(f(Date.now()),C(s(e)),c((function(e){return e+1})));t.current=requestAnimationFrame(n)})),function(){return cancelAnimationFrame(t.current)}}),[e,v,h]),[o,m]}(),f=Object(p.a)(m,2),v=f[0],h=f[1];return function(){var e=Object(a.useContext)(l),t=Object(p.a)(e.viewport.width,2),n=t[0],r=t[1],o=Object(p.a)(e.viewport.height,2),c=o[0],i=o[1];Object(a.useEffect)((function(){var e=ce({width:n,height:c});r(e.width),i(e.height)}),[])}(),r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{className:"glcanvas",width:"1000",height:"1000",onMouseDown:function(e){var t=[e.clientX,e.clientY];console.log("drag start: "+t),i(t)},onMouseUp:function(n){var a=e.viewport.translate.x[1],r=e.viewport.translate.y[1],o=e.viewport.width[1],l=e.viewport.height[1],i=[n.clientX,n.clientY],u=document.getElementsByClassName("glcanvas")[0],s=[u.offsetWidth,u.offsetHeight],m=s[0],f=s[1],p={x1:c[0],x2:i[0],y1:u.offsetHeight-c[1],y2:u.offsetHeight-i[1]};if(!function(e){var t=e.x1,n=e.x2,a=e.y1,r=e.y2,o=Math.abs(t-n),c=Math.abs(a-r);return o<1||c<1}(p)){var v=function(t){var n=t.x,a=t.y,r=document.getElementsByClassName("glcanvas")[0],o=[r.offsetWidth,r.offsetHeight],c=o[0],l=o[1],i=parseFloat(e.viewport.width[0]),u=parseFloat(e.viewport.height[0]),s=u/l;return{x:-i/2+n*(i/c)+parseFloat(e.viewport.translate.x[0]),y:-u/2+a*s+parseFloat(e.viewport.translate.y[0])}}({x:(p.x1+p.x2)/2,y:(p.y1+p.y2)/2});a(v.x),r(v.y);var h=parseFloat(e.viewport.width),E=parseFloat(e.viewport.height),g={width:h*(Math.abs(p.x1-p.x2)/m),height:E*(Math.abs(p.y1-p.y2)/f)};if(!0===t){console.log("scaling with lock");var b=ce(g);o(b.width),l(b.height)}else console.log("scaling without lock"),o(g.width),l(g.height)}},ref:u}),r.a.createElement(oe,null,r.a.createElement(T,{frameCount:v,frameTime:Date.now()-h})))}var ie=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,null,r.a.createElement(le,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[5,1,2]]]);
//# sourceMappingURL=main.091fe591.chunk.js.map