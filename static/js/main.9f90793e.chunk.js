(this["webpackJsonpjulia-frontend"]=this["webpackJsonpjulia-frontend"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),i=n.n(o),c=(n(11),n(12),r.a.createContext()),l=c.Provider,u=(c.Consumer,function(e){return Array.isArray(e)&&2===e.length&&function(e){return"function"===typeof e[1]&&e[1].name.startsWith("bound ")}(e)});var s=function(e){var t=e.children,n={canvasRef:Object(a.useState)(null),gl:Object(a.useState)(null),julia:{coefficients:Object(a.useState)("c, 2/3, -4*c/3, 0 , 0, 1"),c:{x:Object(a.useState)("0.1-cos(u_time)"),y:Object(a.useState)("0.4-sin(u_time/2)")},maxIterations:Object(a.useState)("20"),escapeRadius:Object(a.useState)("200"),useSmoothing:Object(a.useState)(!0),msaa:Object(a.useState)("2x")},viewport:{width:Object(a.useState)("7"),height:Object(a.useState)("7"),translate:{x:Object(a.useState)("0"),y:Object(a.useState)("0")},lockAspectRatio:Object(a.useState)(!0)},color:{colorPoints:Object(a.useState)([{hex:"#000000",position:"0"},{hex:"#FF0000",position:"0.3"},{hex:"#FFFF00",position:"1.0"}]),curve:Object(a.useState)("linear"),colorModel:Object(a.useState)("RGB"),textureData:Object(a.useState)([255,255,255])},time:{startedAt:Object(a.useState)(Date.now()),paused:Object(a.useState)(!1),lastPausedAt:Object(a.useState)(0),pauseDuration:Object(a.useState)(0),timeScale:Object(a.useState)("0.5")}};return r.a.createElement(l,{value:n},t)},f=n(1),m="\n".concat("\n#define PI 3.14159265359\n#define TAU 6.28318530718\n","\n").concat("\nvec2 complexConjug(in vec2 c) { \n  return vec2(c.x, -c.y); \n}\n","\n").concat("\nvec2 complexMult(in vec2 a, in vec2 b) {\n  return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n}\n","\n").concat("\nvec2 complexDiv(in vec2 a, in vec2 b) {\n  return complexMult(a, complexConjug(b));\n}\n","\n").concat("\nfloat complexMag(in vec2 c) { \n  return sqrt(c.x * c.x + c.y * c.y); \n}\n","\n").concat("\nvec2 complexPower(vec2 z1, vec2 z2) {\n  float a2b2 = z1.x * z1.x + z1.y * z1.y;\n  float t1 = pow(a2b2, z2.x / 2.) * exp(-z2.y * atan(z1.y, z1.x));\n  float t2 = z2.x * atan(z1.y, z1.x) + .5 * z2.y * log(a2b2);\n  return vec2(t1 * cos(t2), t1 * sin(t2));\n}\n","\n").concat("\nvec2 complexAdd(vec2 z1, vec2 z2) { \n  return vec2(z1.x + z2.x, z1.y + z2.y); \n}\n","\n"),v="\n".concat("\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1., 2. / 3., 1. / 3., 3.);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6. - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0., 1.), c.y);\n}\n","\n").concat("\nfloat huefn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .1 + .3*(iterations / max_iter);\n}\n","\n").concat("\nfloat satfn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .5 + .5*(iterations / max_iter);\n}\n","\n").concat("\nfloat valfn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .5 + 2.*(iterations / max_iter);\n}\n","\n");function h(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=e[n+1];if(a<=t&&r>t)return[n,n+1]}}function p(e){return e.replace(/ /g,"").toLowerCase()}function d(e){for(var t,n=e,a=new RegExp(/\d+[.]\d+|(\d+[.])+|(\d+)/g),r=[];null!==(t=a.exec(e));)r.push(t);r=r.filter((function(e){return!e[0].includes(".")}));var o=0;for(var i in r){var c=r[i],l=c.index+c[0].length+o;n=n.slice(0,l)+"."+n.slice(l,n.length),o+=1}return n}function g(e){var t=e.children;return r.a.createElement("li",{className:"item"},t)}function b(e){var t=e.text;return r.a.createElement("div",{className:"tooltip"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t}}))}function x(e){var t=e.htmlFor,n=e.text,a=e.tooltip;return a=a||null,r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t},n," ",a?r.a.createElement(b,{text:a}):null))}function E(e){var t=e.item;return r.a.createElement("option",{key:t,value:t},t)}function j(e){var t=e.label,n=e.tooltip,a=e.id,o=e.options,i=e.value,c=e.onChange;return t=t||null,n=n||null,r.a.createElement(g,null,t?r.a.createElement(x,{htmlFor:a,text:t,tooltip:n}):null,r.a.createElement("select",{id:a,name:a,value:i,onChange:c},o.map((function(e,t){return r.a.createElement(E,{key:t,item:e})}))))}var O=[{name:"1x",aaFrac:1},{name:"2x",aaFrac:.5},{name:"4x",aaFrac:.25},{name:"8x",aaFrac:1/8},{name:"16x",aaFrac:1/16}];function C(){var e=Object(a.useContext)(c),t=Object(f.a)(e.julia.msaa,2),n=t[0],o=t[1],i=O.map((function(e){return e.name}));return r.a.createElement(j,{label:"Anti-aliasing",id:"msaa",tooltip:"Level of multisample anti-aliasing applied to render. High levels may result in considerable slowdown",options:i,value:n,onChange:function(e){var t=e.target.value;o(t)}})}var w=function(e){return"\nvec4 julia(vec2 pixel) {\n  ".concat(function(e){var t=e.width,n=e.height,a=e.translate;return"\n  vec2 size = vec2(".concat(d(t),", ").concat(d(n),");\n  vec2 translate = vec2(").concat(d(a.x),", ").concat(d(a.y),");\n  ")}(e.viewport),"\n  ").concat(function(e){var t=e.x,n=e.y;return"vec2 c = vec2(".concat(d(t),", ").concat(d(n),");")}(e.julia.c),"\n\n  // Map pixel value [0, canvasWidth], [0, canvasHeight] into ranges [0, 1]\n  vec2 uv = pixel / u_resolution;\n\n  vec2 z = (size * (uv - 0.5)) + translate;\n\n  float result;\n  int iters = 0;\n  vec2 zPrev = z;\n  z = vec2(0.);\n\n  for (int i = 0; i <= maxIterations; i++) {\n    ").concat(function(e){for(var t=function(e,t){return 0!==parseFloat(t)?0===e?"z = complexAdd(z, ".concat(t,"*c);"):1===e?"z = complexAdd(z, ".concat(t,"*zPrev);"):"z = complexAdd(z, complexPower(".concat(t,"*zPrev, vec2(").concat(e,", 0.)));"):""},n=e.replace(/\s/g,"").split(","),a="",r=0;r<n.length;r++){var o=t(n.length-(r+1),n[r]);""!==o&&(a=a.concat(o,"\n"))}return a}(d(e.julia.coefficients)),"\n    iters = i;\n    zPrev = z;\n    if (complexMag(z) > u_escapeRadius) break;\n  }\n\n  if (iters == maxIterations) {\n    return vec4(0,0,0,1);\n  } else {\n    ").concat(e.julia.useSmoothing?"result = smoothIterations(z, iters);":"result = float(iters);","\n  }\n\n  float percent = result/float(maxIterations);\n\n  return texture2D(u_colormap, vec2(percent));\n\n  // float hue = huefn(result);\n  // float sat = satfn(result);\n  // float val = valfn(result);\n\n  // return hsv2rgb(vec3(hue, sat, val, 1.0));\n}\n")};var y=function(e){return"\n".concat("\nprecision highp float;\n","\n").concat(function(e){var t=O.find((function(t){return t.name===e})).aaFrac;return 1!==t?"#define AA ".concat(t):""}(e.julia.msaa),"\n").concat((t=e.julia.maxIterations,"#define maxIterations ".concat(t)),"\n").concat("\n\nuniform float u_escapeRadius;\n\nuniform vec2 u_resolution;\nuniform float u_time;\nuniform float u_width;\nuniform float u_height;\nuniform float u_translatex;\nuniform float u_translatey;\n\nuniform sampler2D u_colormap;\n","\n").concat(m,"\n").concat(v,"\n").concat(function(e){var t=e.coefficients,n=e.escapeRadius,a=(t.match(/,/g)||[]).length.toString();return"\n  float smoothIterations(vec2 z, int iterations) {\n    float mag = complexMag(z);\n    float logmag = log(mag);\n    float logbound = log(".concat(d(n),");\n    float top = log(logmag/logbound);\n    float f = top/log(").concat(d(a),");\n\n    return float(iterations) - f;\n  }\n  ")}(e.julia),"\n").concat(w(e),"\n").concat("\nvoid main(void) {\n  vec4 color;\n\n  #ifdef AA\n    float n; // Number of loops\n    // Offset from center of pixel\n    for (float x = -0.5; x < 0.5; x += AA) {\n        for (float y = -0.5; y < 0.5; y += AA) {\n            color += julia(gl_FragCoord.xy + vec2(x, y));\n            n += 1.0;\n        }\n    }\n    color /= n; // Normalise colour\n  #else\n    color = julia(gl_FragCoord.xy);\n  #endif\n\n  gl_FragColor = color;\n}\n","\n");var t},_="\nattribute vec3 coordinates;\n\nvoid main(void) {\n  gl_Position = vec4(coordinates, 1.0);\n}\n",R=n(3),A=n(2);function S(e,t,n,a){var r=a(n);return e*(1-r)+t*r}var F={linear:{name:"Linear",value:"linear",fn:function(e,t,n){var a=function(e){return e};return S(e,t,n,a)}},quadratic:{name:"Quadratic",value:"quadratic",fn:function(e,t,n){var a=function(e){return Math.pow(e,2)};return S(e,t,n,a)}},cubic:{name:"Cubic",value:"cubic",fn:function(e,t,n){var a=function(e){return Math.pow(e,3)};return S(e,t,n,a)}},squareroot:{name:"Square root",value:"squareroot",fn:function(e,t,n){var a=function(e){return Math.pow(e,.5)};return S(e,t,n,a)}},cuberoot:{name:"Cube root",value:"cuberoot",fn:function(e,t,n){var a=function(e){return Math.pow(e,1/3)};return S(e,t,n,a)}},cosine:{name:"Cosine",value:"cosine",fn:function(e,t,n){var a=function(e){return-.5*Math.cos(Math.PI*e)+.5};return S(e,t,n,a)}},logarithmic:{name:"Logarithmic",value:"logarithmic",fn:function(e,t,n){var a=function(e){return 1/Math.log(2)*Math.log(e+1)};return S(e,t,n,a)}},exponential:{name:"Exponential",value:"exponential",fn:function(e,t,n){var a=function(e){return Math.pow(2,e)-1};return S(e,t,n,a)}}},T=[{name:"RGB",channels:[{name:"red",min:0,max:255},{name:"green",min:0,max:255},{name:"blue",min:0,max:255}]},{name:"HSV",channels:[{name:"hue",min:0,max:360},{name:"saturation",min:0,max:1},{name:"value",min:0,max:1}]}];function M(e){var t,n=e.map((function(e){return e/255})),a=Object(f.a)(n,3),r=a[0],o=a[1],i=a[2];if(r+o+i===3)return[-1,0,1];if(r+o+i===0)return[-1,0,0];var c=Math.min(r,o,i),l=Math.max(r,o,i),u=l-c;return t=r===l?(o-i)/u:o===l?2+(i-r)/u:4+(r-o)/u,(t*=60)<0&&(t+=360),[t,0!==l?u/l:0,l]}var z=2048,I=4;function P(e){var t=e.trim();t.startsWith("#")&&(t=t.slice(1,t.length));return null!=parseInt(t)?[parseInt("0x".concat(t.slice(0,2))),parseInt("0x".concat(t.slice(2,4))),parseInt("0x".concat(t.slice(4,6)))]:[0,0,0]}function U(e,t,n){for(var a=F[t].fn,r=e.sort((function(e,t){return parseFloat(e.position)-parseFloat(t.position)})),o=r.map((function(e){return parseFloat(e.position)})),i="RGB"!==n?r.map((function(e){return Object(A.a)({},e,{color:M(e.color)})})):r,c=[],l=0;l<z;l++){var u=l/z,s=h(o,u),m=i[s[0]],v=parseFloat(m.position),p=i[s[1]],d=parseFloat(p.position),g=(u-v)/Math.abs(v-d);-1===p.color[0]&&(p.color[0]=m.color[0]);for(var b=[],x=0;x<m.color.length;x++)b[x]=a(m.color[x],p.color[x],g);c[l]=b}for(var E=function e(t,n){for(var a in t){var r=t[a];null!=r&&Array.isArray(r)?t[a]=e(t[a],n):t[a]=n(t[a])}return t}(("RGB"!==n?c.map((function(e){return function(e){var t,n,a,r,o,i,c,l,u=Object(f.a)(e,3),s=u[0],m=u[1],v=u[2];if(0===m)return[255*(t=n=a=v),255*n,255*a];switch(i=v*(1-m),c=v*(1-m*(o=(s/=60)-(r=Math.floor(s)))),l=v*(1-m*(1-o)),r){case 0:t=v,n=l,a=i;break;case 1:t=c,n=v,a=i;break;case 2:t=i,n=v,a=l;break;case 3:t=i,n=c,a=v;break;case 4:t=l,n=i,a=v;break;default:t=v,n=i,a=c}return[255*t,255*n,255*a]}(e)})):c).map((function(e){return[].concat(Object(R.a)(e),[255])})),(function(e){return Math.round(e)})),j=z*I,O=new Uint8Array(j),C=0;C<j;C++){var w=Math.floor(C/I),y=C%I;O[C]=E[w][y]}return O}function L(e){var t=e.type,n=e.label,a=e.name,o=e.tooltip,i=e.id,c=e.value,l=e.onChange;return t=t||"text",a=a||i,n=n||null,o=o||null,r.a.createElement(g,null,n?r.a.createElement(x,{htmlFor:i,text:n,tooltip:o}):null,r.a.createElement("input",{type:t,name:a,id:i,value:c,checked:c,onChange:l,onClick:function(e){e.stopPropagation()}}))}function B(){var e=Object(a.useContext)(c),t=Object(f.a)(e.julia.escapeRadius,2),n=t[0],o=t[1],i=p("Escape Radius");return r.a.createElement(L,{label:"Escape Radius",id:i,tooltip:"When an iterates' magnitude is greater than the square root of this number, consider it as tending towards infinity",value:n,onChange:function(e){var t=e.target.value;o(t)}})}var D=[-1,1,0,-1,-1,0,1,-1,0,1,1,0],k=[3,2,1,3,1,0];function N(e,t){var n=t.canvasRef,a=t.gl,r=t.julia,o=t.time,i=t.viewport,c=r.escapeRadius,l=r.maxIterations,u=a.getUniformLocation(e,"u_escapeRadius");a.uniform1f(u,c);var s=a.getUniformLocation(e,"u_maxIterations");a.uniform1i(s,l);var f=a.getUniformLocation(e,"u_resolution");a.uniform2fv(f,[n.width,n.height]);var m,v,h=a.getUniformLocation(e,"u_time"),p=(m=o.startedAt,v=o.pauseDuration,(Date.now()-m-v)/1e3*o.timeScale);a.uniform1f(h,p);var d=a.getUniformLocation(e,"u_width");a.uniform1f(d,i.width);var g=a.getUniformLocation(e,"u_height");a.uniform1f(g,i.height);var b=a.getUniformLocation(e,"u_translatex");a.uniform1f(b,i.translate.x);var x=a.getUniformLocation(e,"u_translatey");a.uniform1f(x,i.translate.y);var E=a.getUniformLocation(e,"u_colormap"),j=function(e,t){var n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,z,1,0,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n}(a,t.color.textureData);a.uniform1i(E,j)}function H(e){var t=e.canvasRef,n=e.gl;if(null!==n){var a=y(e),r=function(e){var t=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(D),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),t}(n),o=function(e){var t=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(k),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),t}(n),i=function(e,t){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,_),e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,t),e.compileShader(a);var r=e.createProgram();if(e.attachShader(r,n),e.attachShader(r,a),e.linkProgram(r),e.useProgram(r),!e.getShaderParameter(a,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(a);console.log(o);for(var i=[],c=0;c<o.length;c++)":"===o[c]&&i.push(c);var l=o.substring(i[1]+1,i[2]);console.log(t.split("\n")[l-1])}return e.getShaderParameter(n,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(n)),r}(n,a);N(i,e),n.bindBuffer(n.ARRAY_BUFFER,r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o);var c=n.getAttribLocation(i,"coordinates");n.vertexAttribPointer(c,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(c),n.clearColor(0,0,0,1),n.enable(n.DEPTH_TEST),n.clear(n.COLOR_BUFFER_BIT),n.viewport(0,0,t.width,t.height),n.drawElements(n.TRIANGLES,k.length,n.UNSIGNED_SHORT,0)}else alert("Unable to initialize WebGL. Your browser or machine may not support it.")}function W(e){var t=e.children;return r.a.createElement("ul",{className:"gui-container"},t)}function Y(e){var t=e.title,n=e.children,o=Object(a.useState)(!1),i=Object(f.a)(o,2),c=i[0],l=i[1];return r.a.createElement("li",{className:"folder"},r.a.createElement("div",{className:"group"},r.a.createElement("ul",{className:c?"closed":""},r.a.createElement("li",{className:"title",onClick:function(e){l(!c)}},t),n)))}function X(){var e=Object(a.useContext)(c),t=Object(f.a)(e.julia.coefficients,2),n=t[0],o=t[1],i=p("Coefficients");return r.a.createElement(L,{label:"Coefficients",id:i,tooltip:"Comma-seperated values for the coefficients of each polynomial term. <br><br>\n    N values applied in the order Z<sup>n-1</sup> + Z<sup>n-2</sup> + ... + Z, C <br><br>\n    It is recommended to keep the coefficient of the highest term \u22641",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function G(){var e=Object(a.useContext)(c),t=Object(f.a)(e.julia.c.x,2),n=t[0],o=t[1];return r.a.createElement(L,{label:"X",id:"constantx",tooltip:"X (real) component of the constant point C",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function q(){var e=Object(a.useContext)(c),t=Object(f.a)(e.julia.c.y,2),n=t[0],o=t[1];return r.a.createElement(L,{label:"Y",id:"constanty",tooltip:"Y (imaginary) component of the constant point C",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function V(){var e=Object(a.useContext)(c),t=Object(f.a)(e.julia.maxIterations,2),n=t[0],o=t[1],i=p("Max Iterations");return r.a.createElement(L,{id:i,label:"Max Iterations",tooltip:"Maximum number of times to iterate a point before it is considered to be part of the bounded set",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function J(){var e=Object(a.useContext)(c),t=Object(f.a)(e.julia.useSmoothing,2),n=t[0],o=t[1],i=p("Julia smoothing");return r.a.createElement(L,{type:"checkbox",id:i,label:"Julia smoothing",tooltip:"Toggle Julia escape iteration renormalisation. Produces smooth gradients between the boundries of n and n+1 iterations before escape",value:n,onChange:function(e){var t=e.target.checked;o(t)}})}function K(){var e=Object(a.useContext)(c),t=Object(f.a)(e.time.timeScale,2),n=t[0],o=t[1],i=p("Time Scale");return r.a.createElement(L,{id:i,label:"Time Scale",tooltip:"Scale the speed at which time passes for functions reliant on u_time",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function Z(){var e=Object(a.useContext)(c),t=Object(f.a)(e.viewport.width,2),n=t[0],o=t[1];return r.a.createElement(L,{label:"Width",id:"viewportwidth",tooltip:"Width of the complex plane",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function Q(){var e=Object(a.useContext)(c),t=Object(f.a)(e.viewport.height,2),n=t[0],o=t[1];return r.a.createElement(L,{label:"Height",id:"viewportheight",tooltip:"Height of the complex plane",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function $(){var e=Object(a.useContext)(c),t=Object(f.a)(e.viewport.translate.x,2),n=t[0],o=t[1];return r.a.createElement(L,{label:"X",id:"translatex",tooltip:"Horizontal translation of the complex plane",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function ee(){var e=Object(a.useContext)(c),t=Object(f.a)(e.viewport.translate.y,2),n=t[0],o=t[1];return r.a.createElement(L,{label:"Y",id:"translatey",tooltip:"Vertical translation of the complex plane",value:n,onChange:function(e){var t=e.target.value;o(t)}})}function te(){var e=Object(a.useContext)(c),t=Object(f.a)(e.viewport.lockAspectRatio,2),n=t[0],o=t[1],i="Lock aspect ratio",l=p(i);return r.a.createElement(L,{type:"checkbox",id:l,label:i,tooltip:"Lock the aspect ratio of the complex plane to match that of the canvas",value:n,onChange:function(e){var t=e.target.checked;o(t)}})}function ne(){var e=Object(a.useContext)(c),t=Object(f.a)(e.color.curve,2),n=t[0],o=t[1],i=F[n].name,l=Object.keys(F).map((function(e){return F[e].name})),u=p("Mapping curve");return r.a.createElement(j,{label:"Mapping curve",id:u,tooltip:"Curve used to shape the colour mapping",options:l,value:i,onChange:function(e){var t=e.target.value,n=Object.keys(F).find((function(e){return F[e].name===t}));o(n)}})}function ae(){var e=Object(a.useContext)(c),t=Object(f.a)(e.color.colorModel,2),n=t[0],o=t[1],i=T.map((function(e){return e.name})),l=p("Colour model");return r.a.createElement(j,{label:"Colour model",id:l,tooltip:"Colour model used for interpolation between each colour specified in the colour map",options:i,value:n,onChange:function(e){var t=e.target.value;o(t)}})}function re(){return r.a.createElement("div",null)}function oe(e){var t=e.item,n=e.idx,a=e.handleChange,o=t.hex,i="".concat(p("Colour")).concat(n);return r.a.createElement(L,{type:"color",label:"Colour",name:"color",id:i,value:o,onChange:function(e){a(e,n)}})}function ie(e){var t=e.item,n=e.idx,a=e.handleChange,o=t.position,i="".concat(p("Position")).concat(n);return r.a.createElement(L,{type:"text",label:"Position",name:"position",id:i,tooltip:"Value in range [0, 1] representing the colour's position on the colour mapping",value:o,onChange:function(e){a(e,n)}})}function ce(e){var t=e.item,n=e.idx,a=e.handleChange;return r.a.createElement(Y,{title:"Colour ".concat(n+1)},r.a.createElement(oe,{item:t,idx:n,handleChange:a}),r.a.createElement(ie,{item:t,idx:n,handleChange:a}))}function le(){var e=Object(a.useContext)(c),t=Object(f.a)(e.color.colorPoints,2),n=t[0],o=t[1];function i(e,t){var a=e.target.value,r=n[t],i=function(){switch(e.target.name){case"color":return Object(A.a)({},r,{hex:a});case"position":return Object(A.a)({},r,{position:a});default:return r}}.call(),c=Object(R.a)(n);c[t]=i,o(c)}return r.a.createElement(Y,{title:"Colour Points"},r.a.createElement(re,null),n.map((function(e,t){return r.a.createElement(ce,{item:e,key:t,idx:t,handleChange:i})})))}function ue(){return r.a.createElement(W,null,r.a.createElement(Y,{title:"Julia Variables"},r.a.createElement(X,null),r.a.createElement(Y,{title:"Constant Point"},r.a.createElement(G,null),r.a.createElement(q,null)),r.a.createElement(V,null),r.a.createElement(B,null),r.a.createElement(J,null),r.a.createElement(C,null),r.a.createElement(K,null)),r.a.createElement(Y,{title:"Viewport"},r.a.createElement(Y,{title:"Dimensions"},r.a.createElement(Z,null),r.a.createElement(Q,null)),r.a.createElement(Y,{title:"Translate"},r.a.createElement($,null),r.a.createElement(ee,null)),r.a.createElement(te,null)),r.a.createElement(Y,{title:"Colour Mapping"},r.a.createElement(le,null),r.a.createElement(ne,null),r.a.createElement(ae,null)),r.a.createElement(Y,{title:"Presets"}))}function se(e){var t=e.width,n=e.height;var a=function(){var e=document.getElementsByClassName("glcanvas")[0],t=[e.offsetWidth,e.offsetHeight];return t[0]>t[1]?"landscape":"portrait"}(),r=function(e){var t=document.getElementsByClassName("glcanvas")[0],n=[t.offsetWidth,t.offsetHeight],a=n[0],r=n[1];return 0===r||0===a?1:"landscape"===e?a/r:"portrait"===e?r/a:1}(a);return"landscape"===a?n*=1/r:"portrait"===a&&(t*=1/r),{width:t,height:n}}function fe(){var e=Object(a.useContext)(c),t=Object(a.useRef)(),n=Object(a.useState)(0),r=Object(f.a)(n,2),o=r[0],i=r[1],l=Object(a.useState)(0),s=Object(f.a)(l,2),m=s[0],v=s[1],h=e.time.paused[0],p=e.gl[0];return Object(a.useEffect)((function(){return t.current=requestAnimationFrame((function n(){!1===h&&null!==p&&(v(Date.now()),H(function e(t){var n={};for(var a in t)u(t[a])?n[a]=t[a][0]:n[a]=e(t[a]);return n}(e)),i((function(e){return e+1})));t.current=requestAnimationFrame(n)})),function(){return cancelAnimationFrame(t.current)}}),[e,h,p]),[o,m]}function me(){var e=Object(a.useContext)(c),t=Object(f.a)(e.viewport.lockAspectRatio,1)[0],n=Object(a.useState)(),o=Object(f.a)(n,2),i=o[0],l=o[1],u=function(){var e=Object(a.useContext)(c),t=Object(a.useRef)(),n=e.canvasRef[1],r=e.gl[1];return Object(a.useEffect)((function(){n(t.current),r(t.current.getContext("webgl"))}),[n,r,t]),t}();!function(){var e=Object(a.useContext)(c),t=Object(f.a)(e.color.colorPoints,1)[0],n=Object(f.a)(e.color.curve,1)[0],r=Object(f.a)(e.color.colorModel,1)[0],o=Object(f.a)(e.color.textureData,2)[1];Object(a.useEffect)((function(){var e=U(t.map((function(e){return{color:P(e.hex),position:e.position}})),n,r);o(e)}),[t,n,r,o])}();var s=fe(),m=Object(f.a)(s,2);m[0],m[1];return function(){var e=Object(a.useContext)(c),t=Object(f.a)(e.viewport.width,2),n=t[0],r=t[1],o=Object(f.a)(e.viewport.height,2),i=o[0],l=o[1];Object(a.useEffect)((function(){var e=se({width:n,height:i});r(e.width),l(e.height)}),[])}(),r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{className:"glcanvas",width:window.innerWidth,height:window.innerHeight,onMouseDown:function(e){var t=[e.clientX,e.clientY];l(t)},onMouseUp:function(n){var a=e.viewport.translate.x[1],r=e.viewport.translate.y[1],o=e.viewport.width[1],c=e.viewport.height[1],l=[n.clientX,n.clientY],u=document.getElementsByClassName("glcanvas")[0],s=[u.offsetWidth,u.offsetHeight],f=s[0],m=s[1];if(void 0!==i&&void 0!==l){var v={x1:i[0],x2:l[0],y1:u.offsetHeight-i[1],y2:u.offsetHeight-l[1]};if(!function(e){var t=e.x1,n=e.x2,a=e.y1,r=e.y2,o=Math.abs(t-n),i=Math.abs(a-r);return o<1||i<1}(v)){var h=function(t){var n=t.x,a=t.y,r=document.getElementsByClassName("glcanvas")[0],o=[r.offsetWidth,r.offsetHeight],i=o[0],c=o[1],l=parseFloat(e.viewport.width[0]),u=parseFloat(e.viewport.height[0]),s=u/c;return{x:-l/2+n*(l/i)+parseFloat(e.viewport.translate.x[0]),y:-u/2+a*s+parseFloat(e.viewport.translate.y[0])}}({x:(v.x1+v.x2)/2,y:(v.y1+v.y2)/2});a(h.x),r(h.y);var p=parseFloat(e.viewport.width),d=parseFloat(e.viewport.height),g={width:p*(Math.abs(v.x1-v.x2)/f),height:d*(Math.abs(v.y1-v.y2)/m)};if(!0===t){var b=se(g);o(b.width),c(b.height)}else o(g.width),c(g.height)}}},ref:u}))}var ve=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s,null,r.a.createElement(me,null),r.a.createElement(ue,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.9f90793e.chunk.js.map