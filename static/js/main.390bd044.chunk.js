(this["webpackJsonpjulia-frontend"]=this["webpackJsonpjulia-frontend"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),c=n.n(o),l=(n(9),n(10),n(1)),i=r.a.createContext(),u=i.Provider,s=(i.Consumer,function(e){return Array.isArray(e)&&2===e.length&&function(e){return"function"===typeof e[1]&&e[1].name.startsWith("bound ")}(e)});function f(e){var t={};for(var n in e)s(e[n])?t[n]=e[n][0]:t[n]=f(e[n]);return t}function m(e,t){for(var n in e){if(s(t[n]))(0,t[n][1])(e[n]);else m(e[n],t[n])}}var v=function(e){var t=e.children,n={canvasRef:Object(a.useState)(null),gl:Object(a.useState)(null),julia:{c:{x:Object(a.useState)("0.2"),y:Object(a.useState)("sin(u_time)")},complexPoly:Object(a.useState)("z^2 + c"),escapeRadius:Object(a.useState)("4.0"),maxIterations:Object(a.useState)("100"),useSmoothing:Object(a.useState)(!0)},viewport:{width:Object(a.useState)("4.5"),height:Object(a.useState)("4.5"),translate:{x:Object(a.useState)("0."),y:Object(a.useState)("0.")},lockAspectRatio:Object(a.useState)(!0)},colorMap:[{color:Object(a.useState)([6,.1,.7]),position:Object(a.useState)(0)},{color:Object(a.useState)([1,.9,0]),position:Object(a.useState)(1)}],time:{startedAt:Object(a.useState)(Date.now()),paused:Object(a.useState)(!1),lastPausedAt:Object(a.useState)(0),pauseDuration:Object(a.useState)(0),timeScale:Object(a.useState)("0.3")}};return r.a.createElement(u,{value:n},t)},p="\n".concat("\n#define PI 3.14159265359\n#define TAU 6.28318530718\n","\n").concat("\nvec2 complexConjug(in vec2 c) { \n  return vec2(c.x, -c.y); \n}\n","\n").concat("\nvec2 complexMult(in vec2 a, in vec2 b) {\n  return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n}\n","\n").concat("\nvec2 complexDiv(in vec2 a, in vec2 b) {\n  return complexMult(a, complexConjug(b));\n}\n","\n").concat("\nfloat complexMag(in vec2 c) { \n  return sqrt(c.x * c.x + c.y * c.y); \n}\n","\n").concat("\nvec2 complexPower(vec2 z1, vec2 z2) {\n  float a2b2 = z1.x * z1.x + z1.y * z1.y;\n  float t1 = pow(a2b2, z2.x / 2.) * exp(-z2.y * atan(z1.y, z1.x));\n  float t2 = z2.x * atan(z1.y, z1.x) + .5 * z2.y * log(a2b2);\n  return vec2(t1 * cos(t2), t1 * sin(t2));\n}\n","\n").concat("\nvec2 complexAdd(vec2 z1, vec2 z2) { \n  return vec2(z1.x + z2.x, z1.y + z2.y); \n}\n","\n"),h="\n".concat("\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1., 2. / 3., 1. / 3., 3.);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6. - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0., 1.), c.y);\n}\n","\n").concat("\nfloat huefn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .1 + 5.6*(iterations / max_iter);\n}\n","\n").concat("\nfloat satfn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .7 + 1.*(iterations / max_iter);\n}\n","\n").concat("\nfloat valfn(float iterations) {\n  float max_iter = float(maxIterations);\n  return .7 + 1.*(iterations / max_iter);\n}\n","\n");var g=function(e){return"\n".concat("\nprecision highp float;\n","\n").concat((t=e.julia.maxIterations,"#define maxIterations ".concat(t)),"\n").concat("\nuniform float u_escapeRadius;\n\nuniform vec2 u_resolution;\nuniform float u_time;\nuniform float u_width;\nuniform float u_height;\nuniform float u_translatex;\nuniform float u_translatey;\n","\n").concat(function(e,t){var n=function(e){return"vec3(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")")};return"\n  float mapCurve(float percent) {\n    float x = abs(cos(20.*3.14*percent));\n    return x;\n  }\n\n  vec3 colorMap(float percent) {\n    vec3 c1 = ".concat(n(e),";\n    vec3 c2 = ").concat(n(t),";\n    float curve = mapCurve(percent);\n    return c1 * (1. - curve) + c2 * curve;\n  }\n  ")}(e.colorMap[0].color,e.colorMap[1].color),"\n").concat(p,"\n").concat(h,"\n").concat("\nfloat smoothIterations(vec2 z, int iterations) {\n  // sqrt of inner term removed using log simplification rules.\n  // sqrt is equivilent to raising to power 0.5 therefore dividing\n  // by 2 or multiplying by 0.5 avoids an inefficient sqrt calculation\n  float log_zn = log(z.x * z.x + z.y * z.y) / 2.;\n  float nu = log(log_zn / log(2.)) / log(2.);\n  // Rearranging the potential function.\n  // Dividing log_zn by log(2) instead of log(N = 1<<8)\n  // because we want the entire palette to range from the\n  // center to radius 2, NOT our bailout radius.\n  return float(iterations) + 1. - nu;\n}\n","\n").concat(function(e){return"\nvec3 julia(vec2 z, vec2 c) {\n  float result;\n  int iters = 0;\n\n  for (int i = 0; i <= maxIterations; i++) {\n    z = complexPower(z, vec2(2, 0));\n    z = complexAdd(z, c);\n    iters = i;\n    if (complexMag(z) > u_escapeRadius) break;\n  }\n\n  if (iters == maxIterations) {\n    return vec3(0, 0, 0);\n  } else {\n    ".concat(e.julia.useSmoothing?"result = smoothIterations(z, iters);":"result = float(iters);","\n  }\n\n  float percent = result/float(maxIterations);\n\n  float hue = huefn(result);\n  float sat = satfn(result);\n  float val = valfn(result);\n\n  //return colorMap(percent);\n\n  return hsv2rgb(vec3(hue, sat, val));\n}\n")}(e),"\n").concat(function(e){return"\nvoid main(void) {\n  ".concat(function(e){var t=e.width,n=e.height,a=e.translate;return"\n  float XSIZE = ".concat(t,";\n  float YSIZE = ").concat(n,";\n  float XT = ").concat(a.x,";\n  float YT = ").concat(a.y,";\n  ")}(e.viewport),"\n\n  ").concat(function(e){var t=e.x,n=e.y;return"vec2 c = vec2(".concat(t,", ").concat(n,");")}(e.julia.c),"\n\n  // Normalized pixel coordinates (from 0 to 1)\n  vec2 uv = gl_FragCoord.xy / u_resolution.xy;\n\n  vec2 z;\n  z.x = (XSIZE * (uv.x - .5)) + XT;\n  z.y = (YSIZE * (uv.y - .5)) + YT;\n\n  vec3 col = julia(z, c);\n  gl_FragColor = vec4(col, 1.);\n}\n")}(e),"\n");var t},b="\nattribute vec3 coordinates;\n\nvoid main(void) {\n  gl_Position = vec4(coordinates, 1.0);\n}\n",x=[-1,1,0,-1,-1,0,1,-1,0,1,1,0],d=[3,2,1,3,1,0];function E(e,t){var n=t.canvasRef,a=t.gl,r=t.julia,o=t.time,c=t.viewport,l=r.escapeRadius,i=r.maxIterations,u=a.getUniformLocation(e,"u_escapeRadius");a.uniform1f(u,l);var s=a.getUniformLocation(e,"u_maxIterations");a.uniform1i(s,i);var f=a.getUniformLocation(e,"u_resolution");a.uniform2fv(f,[n.width,n.height]);var m,v,p=a.getUniformLocation(e,"u_time"),h=(m=o.startedAt,v=o.pauseDuration,(Date.now()-m-v)/1e3*o.timeScale);a.uniform1f(p,h);var g=a.getUniformLocation(e,"u_width");a.uniform1f(g,c.width);var b=a.getUniformLocation(e,"u_height");a.uniform1f(b,c.height);var x=a.getUniformLocation(e,"u_translatex");a.uniform1f(x,c.translate.x);var d=a.getUniformLocation(e,"u_translatey");a.uniform1f(d,c.translate.y)}function j(e){var t=e.canvasRef,n=e.gl;if(null!==n){var a=g(e),r=function(e){var t=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(x),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),t}(n),o=function(e){var t=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),t}(n),c=function(e,t){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,b),e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,t),e.compileShader(a);var r=e.createProgram();if(e.attachShader(r,n),e.attachShader(r,a),e.linkProgram(r),e.useProgram(r),!e.getShaderParameter(a,e.COMPILE_STATUS)){for(var o=e.getShaderInfoLog(a),c=[],l=0;l<o.length;l++)":"===o[l]&&c.push(l);var i=o.substring(c[1]+1,c[2]);console.log(t.split("\n")[i-1])}return e.getShaderParameter(n,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(n)),r}(n,a);E(c,e),n.bindBuffer(n.ARRAY_BUFFER,r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o);var l=n.getAttribLocation(c,"coordinates");n.vertexAttribPointer(l,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l),n.clearColor(0,0,0,1),n.enable(n.DEPTH_TEST),n.clear(n.COLOR_BUFFER_BIT),n.viewport(0,0,t.width,t.height),n.drawElements(n.TRIANGLES,d.length,n.UNSIGNED_SHORT,0)}else alert("Unable to initialize WebGL. Your browser or machine may not support it.")}function w(e){var t=e.frameCount,n=e.frameTime;return r.a.createElement("div",{className:"frametime"},r.a.createElement("p",null,"Frames: ",t),r.a.createElement("p",null,"Frametime: ",n,"ms"))}function O(e){var t=e.hoverText;return r.a.createElement("div",{className:"tooltip"},r.a.createElement("span",{className:"tooltip-text"},t))}function y(e){var t=e.label,n=e.helpText,a=e.inputValue,o=e.setInputValue;return r.a.createElement("div",{className:"field-container"},r.a.createElement("span",{className:"panel-label"},t),n?r.a.createElement(O,{hoverText:n}):null,r.a.createElement("input",{className:"panel-input",name:t,value:a,onChange:function(e){o(e.target.value),a=e.target.value}}))}function S(){var e=Object(a.useContext)(i),t=Object(l.a)(e.julia.maxIterations,2),n=t[0],o=t[1];return r.a.createElement(y,{label:"Max Iterations",helpText:"Max iterations",inputValue:n,setInputValue:o})}function _(){var e=Object(a.useContext)(i),t=Object(l.a)(e.viewport.translate.x,2),n=t[0],o=t[1];return r.a.createElement(y,{label:"Translate X",helpText:"Translate x",inputValue:n,setInputValue:o})}function z(){var e=Object(a.useContext)(i),t=Object(l.a)(e.viewport.translate.y,2),n=t[0],o=t[1];return r.a.createElement(y,{label:"Translate Y",helpText:"Translate y",inputValue:n,setInputValue:o})}function R(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement(z,null))}function A(e){var t=e.label,n=e.helpText,a=e.inputValue,o=e.setInputValue;return r.a.createElement("div",{className:"field-container"},r.a.createElement("span",{className:"panel-label"},t),n?r.a.createElement(O,{hoverText:n}):null,r.a.createElement("input",{className:"panel-input",type:"checkbox",name:t,checked:a,onChange:function(){o(!1===a)}}))}function C(){var e=Object(a.useContext)(i),t=Object(l.a)(e.viewport.width,2),n=t[0],o=t[1];return r.a.createElement(y,{label:"Viewport Width",helpText:"Viewport width",inputValue:n,setInputValue:o})}function T(){var e=Object(a.useContext)(i),t=Object(l.a)(e.viewport.height,2),n=t[0],o=t[1];return r.a.createElement(y,{label:"Viewport Height",helpText:"Viewport height",inputValue:n,setInputValue:o})}function I(){var e=Object(a.useContext)(i),t=Object(l.a)(e.viewport.lockAspectRatio,2),n=t[0],o=t[1];return r.a.createElement(A,{label:"Lock aspect ratio",helpText:"Toggle viewport aspect ratio locking",inputValue:n,setInputValue:o})}function F(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement(T,null),r.a.createElement(R,null),r.a.createElement(I,null))}function N(e){var t=e.open,n=e.setOpen;return r.a.createElement("button",{onClick:function(e){!0===t?n(!1):!1===t&&n(!0)},className:"panel-toggle"},t?"<<<":">>>")}function V(e){var t=e.children,n=e.styleClass,o=Object(a.useState)(!0),c=Object(l.a)(o,2),i=c[0],u=c[1];return r.a.createElement("div",{className:"".concat(n," panel ").concat(i?"panel-open":"panel-closed")},r.a.createElement(N,{open:i,setOpen:u}),t)}function B(){var e=Object(a.useContext)(i),t=Object(l.a)(e.time.paused,2),n=t[0],o=t[1],c=Object(l.a)(e.time.lastPausedAt,2),u=c[0],s=c[1],f=Object(l.a)(e.time.pauseDuration,2)[1];return r.a.createElement("button",{onClick:function(){!0===n?(o(!1),f((function(e){return e+(Date.now()-u)}))):!1===n&&(o(!0),s(Date.now()))},className:"pause-button"},n?"Resume":"Pause")}function U(){var e=Object(a.useContext)(i),t=Object(l.a)(e.julia.c.x,2),n=t[0],o=t[1];return r.a.createElement(y,{label:"C Y",helpText:"C value x",inputValue:n,setInputValue:o})}function L(){var e=Object(a.useContext)(i),t=Object(l.a)(e.julia.c.y,2),n=t[0],o=t[1];return r.a.createElement(y,{label:"C X",helpText:"C value y",inputValue:n,setInputValue:o})}function M(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement(L,null))}function D(){var e=localStorage.getItem("presets");return e?JSON.parse(e):[]}function k(){var e=Object(a.useContext)(i),t=Object(a.useState)(""),n=Object(l.a)(t,2),o=n[0],c=n[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),v=s[0],p=s[1],h=Object(a.useState)([]),g=Object(l.a)(h,2),b=g[0],x=g[1],d=function(){var e=D();x(e)};return Object(a.useEffect)((function(){d()}),[]),r.a.createElement("div",null,r.a.createElement(y,{label:"Preset name",inputValue:v,setInputValue:p}),r.a.createElement("select",{value:o,onChange:function(e){c(e.target.value)},className:"panel-input preset-selector"},0===b.length?r.a.createElement("option",null,"No presets saved"):null,b.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}))),r.a.createElement("button",{className:"panel-input",onClick:function(){var t=function(e,t){return{name:e,julia:f(t.julia),viewport:f(t.viewport)}}(v,e);!function(e){var t=D();for(var n in t)if(n.name===e)return!0}(t),function(e){var t=D();t.push(e),localStorage.setItem("presets",JSON.stringify(t))}(t),d()}},"Save"),r.a.createElement("button",{className:"panel-input",onClick:function(){var t=D();for(var n in t){var a=t[n];a.name===o&&(m(a.julia,e.julia),m(a.viewport,e.viewport))}}},"Load"))}function P(){var e=Object(a.useContext)(i),t=Object(l.a)(e.julia.useSmoothing,2),n=t[0],o=t[1];return r.a.createElement(A,{label:"Julia smoothing",helpText:"Toggle Julia iteration smoothing",inputValue:n,setInputValue:o})}var Y=function(e){var t=e.children;function n(e){var t=e.size;return r.a.createElement("div",{style:{marginBottom:t}})}return r.a.createElement(V,{styleClass:"control-panel"},r.a.createElement(k,null),r.a.createElement(n,{size:"3em"}),r.a.createElement("p",{className:"field-container"},"Drag a box on the canvas to zoom to that area"),r.a.createElement("p",{className:"field-container"},"Integers must be followed by a period to avoid compiliation errors"),r.a.createElement(n,{size:"3em"}),r.a.createElement(S,null),r.a.createElement(P,null),r.a.createElement(n,{size:"3em"}),r.a.createElement(F,null),r.a.createElement(n,{size:"3em"}),r.a.createElement(M,null),r.a.createElement(n,{size:"3em"}),r.a.createElement(B,null),t)};function H(e){var t=e.width,n=e.height;var a=function(){var e=document.getElementsByClassName("glcanvas")[0],t=[e.offsetWidth,e.offsetHeight];return t[0]>t[1]?"landscape":"portrait"}(),r=function(e){var t=document.getElementsByClassName("glcanvas")[0],n=[t.offsetWidth,t.offsetHeight],a=n[0],r=n[1];return 0===r||0===a?1:"landscape"===e?a/r:"portrait"===e?r/a:1}(a);return"landscape"===a?n*=1/r:"portrait"===a&&(t*=1/r),{width:t,height:n}}function W(){var e=Object(a.useContext)(i),t=Object(l.a)(e.viewport.lockAspectRatio,1)[0],n=Object(a.useState)(),o=Object(l.a)(n,2),c=o[0],u=o[1],s=function(){var e=Object(a.useContext)(i),t=Object(a.useRef)(),n=e.canvasRef[1],r=e.gl[1];return Object(a.useEffect)((function(){n(t.current),r(t.current.getContext("webgl"))}),[n,r,t]),t}(),m=function(){var e=Object(a.useContext)(i),t=Object(a.useRef)(),n=Object(a.useState)(0),r=Object(l.a)(n,2),o=r[0],c=r[1],u=Object(a.useState)(0),s=Object(l.a)(u,2),m=s[0],v=s[1],p=e.time.paused[0],h=e.gl[0];return Object(a.useEffect)((function(){return t.current=requestAnimationFrame((function n(){!1===p&&null!==h&&(v(Date.now()),j(f(e)),c((function(e){return e+1})));t.current=requestAnimationFrame(n)})),function(){return cancelAnimationFrame(t.current)}}),[e,p,h]),[o,m]}(),v=Object(l.a)(m,2),p=v[0],h=v[1];return function(){var e=Object(a.useContext)(i),t=Object(l.a)(e.viewport.width,2),n=t[0],r=t[1],o=Object(l.a)(e.viewport.height,2),c=o[0],u=o[1];Object(a.useEffect)((function(){var e=H({width:n,height:c});r(e.width),u(e.height)}),[])}(),r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{className:"glcanvas",width:"1000",height:"1000",onMouseDown:function(e){var t=[e.clientX,e.clientY];console.log("drag start: "+t),u(t)},onMouseUp:function(n){var a=e.viewport.translate.x[1],r=e.viewport.translate.y[1],o=e.viewport.width[1],l=e.viewport.height[1],i=[n.clientX,n.clientY],u=document.getElementsByClassName("glcanvas")[0],s=[u.offsetWidth,u.offsetHeight],f=s[0],m=s[1],v={x1:c[0],x2:i[0],y1:u.offsetHeight-c[1],y2:u.offsetHeight-i[1]};console.log(v);var p={x:(v.x1+v.x2)/2,y:(v.y1+v.y2)/2};console.log(p);var h=function(t){var n=t.x,a=t.y,r=document.getElementsByClassName("glcanvas")[0],o=[r.offsetWidth,r.offsetHeight],c=o[0],l=o[1],i=parseFloat(e.viewport.width[0]),u=parseFloat(e.viewport.height[0]),s=u/l;return{x:-i/2+n*(i/c)+parseFloat(e.viewport.translate.x[0]),y:-u/2+a*s+parseFloat(e.viewport.translate.y[0])}}(p);a(h.x),r(h.y);var g=parseFloat(e.viewport.width),b=parseFloat(e.viewport.height),x={width:g*(Math.abs(v.x1-v.x2)/f),height:b*(Math.abs(v.y1-v.y2)/m)};if(!0===t){console.log("scaling with lock");var d=H(x);o(d.width),l(d.height)}else console.log("scaling without lock"),o(x.width),l(x.height)},ref:s}),r.a.createElement(Y,null,r.a.createElement(w,{frameCount:p,frameTime:Date.now()-h})))}var X=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(v,null,r.a.createElement(W,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[4,1,2]]]);
//# sourceMappingURL=main.390bd044.chunk.js.map